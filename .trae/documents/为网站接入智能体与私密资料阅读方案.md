## 目标
- 自动检索外部高质量资源（视频、文档、PDF、知乎、B站等）并收集直达链接。
- 面向站内发布进行元数据规范化、去重与标签化，形成可审查的数据集。
- 严格遵守平台与法律合规，仅获取公开可访问的页面元数据与链接，不抓取受限内容。

## 能力范围
- 发现：基于站内主题词与同义词生成检索查询，覆盖中文优先。
- 提取：抓取页面标题、简介、OG/Twitter元数据、favicon、语言与类型判定。
- 过滤：去除付费/登录墙、非直链、低质量聚合页；优先官网与权威来源。
- 去重：URL归一化与标题相似度合并，避免重复收录。
- 标签化：自动建议标签（学科/类型/语言/难度/平台），人工确认与修订。
- 校验：定期断链检测（HEAD/GET，仅状态与时间），标注失效风险。

## 数据源与合规
- 搜索聚合：Bing Web Search API/SerpAPI（含Google/Baidu）优先，减少直接爬站负担。
- 站点级检索：
  - B站：站内搜索页解析（仅元信息与视频页链接），不批量抓取播放页内容。
  - 知乎：仅收集公开问题/文章链接与摘要，不抓取付费或登录内容。
  - 学术/开源站：官方文档、GitHub仓库、大学课程页直链。
- robots.txt与TOS：尊重站点策略；限制频率与并发；只保留链接与元数据。

## 技术架构
- 任务编排：队列与去重缓存（Redis/SQLite均可），按数据源分任务。
- 抓取层：HTTP客户端 + 可选无头浏览器（对动态渲染页仅在必要时启用）。
- 解析层：HTML解析与OG/Schema.org提取；语言检测与类型判定。
- 语义辅助：小型本地中文模型或规则库做标签建议与同义词扩展。
- 存储层：资源仓库JSON（便于站内展示）+ 审计表（抓取时间、状态码）。

## 收集管道
1. 关键词生成：从站内分类与同义词库生成查询（如“有限元”“结构分析”“数值线性代数”）。
2. 搜索调用：调用搜索API，获取Top-N结果（中文权重更高）。
3. 结果筛选：去除广告/付费/登录跳转，优先官网与直链PDF。
4. 元数据抽取：标题、摘要、OG、favicon、语言、类型、平台。
5. 直链判定：PDF/文档直链检测；视频仅保留播放页链接。
6. 归一化与去重：URL规范化与标题/域名相似度合并。
7. 标签建议：学科/类型/语言/难度/平台；高置信度自动赋值，低置信度待人工审查。
8. 断链标注：HEAD/GET检测，记录状态与时间，不存页面内容。

## 标签体系（初版）
- 学科：计算数学、有限元、结构分析、线性代数、优化、概率统计。
- 类型：视频、文档、PDF、教程、官网、仓库、工具。
- 平台：B站、知乎、GitHub、官网、大学课程页。
- 语言：zh、en；难度：入门、进阶、高级。

## 数据模型（示例字段）
- `id`、`title`、`url`、`platform`、`type`、`lang`、`tags`、`summary`
- `source_trust`（权威评分）、`is_direct_link`、`requires_login`、`last_checked`
- `canonical_url`、`favicon`、`license`（如有）、`notes`

## 审核与发布
- 审核面板：展示新收集项、差异对比与标签建议；人工确认后入库。
- 发布策略：仅发布可直接访问的权威资源；可设定每周批量上线。
- 变更日志：记录新增/修改/下线，便于追踪与回滚。

## 运行与成本
- 优先使用搜索API减少高频爬取；对站点级检索设限速与并发上限。
- 缓存已解析的元数据与相似项，周期性刷新（如每30天）。
- 估算：每周批量任务1000–3000条元数据解析，API费用与时间可控。

## 风险与合规
- 严禁抓取或存储受限内容与全文；仅保留链接与公开元数据。
- 明确免责声明与来源标注；尊重版权与平台政策。
- 敏感站点设置 deny 列表；优先权威/开源来源。

## 里程碑
- M1：关键词库与标签体系确定；搜索API连通；首批300条资源收集与审核。
- M2：去重与断链检测上线；审核面板可用；发布首批资源到站内JSON。
- M3：语义标签建议与相关主题推荐；每周增量更新与变更日志。

请确认该方案。如确认，我将按里程碑开始实施M1（不修改现有站点发布，仅收集与审核数据），并在完成后提交首批资源目录供你检查。